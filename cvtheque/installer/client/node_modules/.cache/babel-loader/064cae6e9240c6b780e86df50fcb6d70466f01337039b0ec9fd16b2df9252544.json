{"ast":null,"code":"import { APIService } from '@/core/util/services/api.service';\nimport { required } from '@/core/util/validation/rules';\nimport { navigate } from '@/core/util/helper/navigation.ts';\nimport VersionDropdown from '@/components/VersionDropdown.vue';\nexport default {\n  name: 'CurrentVersionScreen',\n  components: {\n    'version-dropdown': VersionDropdown\n  },\n  setup() {\n    const http = new APIService(window.appGlobal.baseUrl, '');\n    return {\n      http\n    };\n  },\n  data() {\n    return {\n      isLoading: false,\n      version: null,\n      rules: {\n        version: [required]\n      }\n    };\n  },\n  beforeMount() {\n    this.isLoading = true;\n    this.http.request({\n      method: 'GET',\n      url: '/upgrader/api/current-version'\n    }).then(response => {\n      const {\n        version\n      } = response.data;\n      if (version) {\n        this.version = {\n          id: version,\n          label: version\n        };\n      }\n      this.isLoading = false;\n    });\n  },\n  methods: {\n    onClickBack() {\n      navigate('/upgrader/system-check');\n    },\n    onSubmit() {\n      this.isLoading = true;\n      this.http.request({\n        method: 'POST',\n        url: '/upgrader/api/current-version',\n        data: {\n          currentVersion: this.version?.id\n        }\n      }).then(() => {\n        return this.http.request({\n          method: 'POST',\n          url: '/upgrader/api/send-data/upgrader-start'\n        });\n      }).then(() => {\n        navigate('/upgrader/process');\n      });\n    }\n  }\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}